(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5821],{26161:function(e,r,t){"use strict";var n=t(59499),a=t(60802),o=t(4730),i=t(62056),l=t(85893),c=["children","isLoading","isDisabled"];function s(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function u(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?s(Object(t),!0).forEach((function(r){(0,n.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):s(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var d={button:{backgroundColor:"#4267B2",textIndent:20,"&:hover":{backgroundColor:"#4267B2",boxShadow:"0px 4px 8px rgba(0, 0, 0, 0.16)"},"&:disabled":{backgroundColor:"#4267B2"}},facebookIcon:{color:"common.neutrals.white",position:"absolute",height:30,width:30,left:15,bottom:7}};r.Z=function(e){var r=e.children,t=e.isLoading,n=e.isDisabled,s=(0,o.Z)(e,c);return(0,l.jsx)(i.Z,u(u({sx:d.button,fullWidth:!0,startIcon:(0,l.jsx)(a.Z,{sx:d.facebookIcon}),loading:t,disabled:n},s),{},{children:r}))}},75593:function(e,r,t){"use strict";t.r(r),t.d(r,{__N_SSP:function(){return q},default:function(){return D}});var n=t(27948),a=t(86886),o=t(99226),i=t(50135),l=t(21737),c=t(50029),s=t(59499),u=t(87794),d=t.n(u),p=t(33299),b=t(11163),g=t(67294),f=t(11752),m=t(4298),h=t.n(m),x=t(74231),v=t(16959),w=t(57045),y=t(15825),j=t(62056),O=t(26161),k=t(77344),Z=t(11235),S=t(38108),C=t(85893);function E(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function A(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?E(Object(t),!0).forEach((function(r){(0,s.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):E(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var P=x.Ry().shape({email:x.Z_().matches(/^\S+$/,"emailAddressError").required("login.emailAddressRequired").default(""),password:x.Z_().required("login.passwordRequired").default("")}),U=(0,f.default)().publicRuntimeConfig,_={outerContainer:{my:{sm:12},py:{xs:15,sm:0}},midContainer:{bgcolor:"background.paper",boxShadow:{sm:"0px 8px 32px rgba(0, 0, 0, 0.12)"},borderRadius:3,position:{sm:"relative"},zIndex:1,maxWidth:{sm:500},mx:"auto"},innerContainer:{pt:6,px:{sm:16},py:{sm:12},borderRadius:{sm:[3,3,0,0]}},memberLoginText:{textAlign:{xs:"left",sm:"center"},mb:{xs:6,sm:7}},error:{mb:2},buttonContainer:{my:4},orContainer:{display:"flex",flexDirection:"column",alignItems:"center",color:"common.neutrals.primary",mx:0,mt:1,mb:2,"&::before, &::after":{flexGrow:1,background:"common.neutrals.quaternary",height:"1px",fontSize:0,lineHeight:0,mx:2,my:0,content:'""'}},signUpText:{textAlign:"center",my:{sm:3},mt:{xs:20,sm:3},mb:{xs:10,sm:3}},alert:{mb:4}},q=!0;function D(){var e,r,t=(0,b.useRouter)(),u=(0,v.wx)(),f=null!==(e=t.query)&&void 0!==e&&e.callbackUrl?"/account/create/welcome?callbackUrl=".concat(t.query.callbackUrl):"/account/create/welcome",m=P.getDefaultFromShape(),x=(0,g.useState)(m.email),k=x[0],E=x[1],q=(0,g.useState)(m.password),D=q[0],L=q[1],R=(0,g.useState)({}),I=R[0],N=R[1],B=(0,g.useState)(null),F=B[0],T=B[1],z=(0,g.useState)(!1),W=z[0],X=z[1],G=(0,g.useState)({email:!1,password:!1}),H=G[0],K=G[1],M=(0,g.useState)({loading:!1,disabled:!1}),V=M[0],Y=M[1],$=(0,g.useState)({loading:!1,disabled:!1}),J=$[0],Q=$[1];(0,g.useEffect)((function(){var e,r,n,a={Signin:u("login.oAuthError"),OAuthSignin:u("login.oAuthError"),OAuthCallback:u("login.oAuthError"),OAuthCreateAccount:u("login.oAuthError"),Callback:u("login.oAuthError"),OAuthAccountNotLinked:u("login.oAuthAccountNotLinkedError"),CredentialsSignin:u("login.error"),RecaptchaFailed:u("login.recaptchaFailed")};a[null===(e=t.query)||void 0===e?void 0:e.error]?T(a[null===(n=t.query)||void 0===n?void 0:n.error]):null!==(r=t.query)&&void 0!==r&&r.error?T(u("login.oAuthError")):T(null)}),[u,null===(r=t.query)||void 0===r?void 0:r.error]);var ee=function(e,r){X(!1),H[e]&&te(e,r)},re=function(e,r,t){if(X(!1),I.fbUserExists){var n=Object.assign({},I);delete n.fbUserExists,N(n)}t(r),K(A(A({},H),{},(0,s.Z)({},e,!0))),H[e]&&te(e,r)},te=function(e,r){P.validateAt(e,(0,s.Z)({},e,r)).then((function(){var r=Object.assign({},I);delete r[e],N(r),K(A(A({},H),{},(0,s.Z)({},e,!0)))})).catch((function(r){var t=Object.assign(I,(0,s.Z)({},e,r));N(A({},t))}))};(0,g.useEffect)((function(){W&&(E(m.email),L(m.email),N((function(e){return delete e.email,delete e.password,A({},e)})))}),[W,k,D,m.email,m.password]);var ne=function(){var e=(0,c.Z)(d().mark((function e(){var r,n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.locale===t.defaultLocale?new URL(U.baseUrl).toString():new URL("".concat(U.baseUrl,"/").concat(t.locale,"/")).toString(),t.query.callbackUrl&&(n=new URL("".concat(U.baseUrl,"/").concat(t.query.callbackUrl)).toString()),X(!0),Q({loading:!0,disabled:!0}),Y({loading:!1,disabled:!0}),(0,p.signIn)("facebook",{callbackUrl:n||r}).catch((function(){Y({loading:!1,disabled:!1}),Q({loading:!1,disabled:!1})}));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ae=function(){var e=(0,c.Z)(d().mark((function e(r){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.preventDefault(),P.validate({email:k,password:D},{abortEarly:!1}).then((0,c.Z)(d().mark((function e(){var r,n,a,o,i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return K({email:!0,password:!0}),Y({loading:!0,disabled:!0}),Q({loading:!1,disabled:!0}),e.prev=3,e.next=6,(0,y.s)("login");case 6:return r=e.sent,e.next=9,(0,p.signIn)("credentials",{username:k,password:D,redirect:!1,token:r});case 9:return n=e.sent,a=t.query.callbackUrl,e.next=13,(0,p.getSession)();case 13:if(o=e.sent,i=(null===o||void 0===o?void 0:o.locale)||t.locale,n.ok&&"RecaptchaFailed"!==n.error){e.next=21;break}return Y({loading:!1,disabled:!1}),Q({loading:!1,disabled:!1}),e.abrupt("return",t.push("/account/login?error=".concat(n.error),null,{locale:i}));case 21:if(a&&!/\/account\/login/.test(a)&&/^https?/.test(a)){e.next=25;break}return e.abrupt("return",t.push(U.baseUrl,null,{locale:i}));case 25:return e.abrupt("return",window.location.assign((0,w.mC)(a,i,t)));case 26:e.next=32;break;case 28:e.prev=28,e.t0=e.catch(3),Y({loading:!1,disabled:!1}),Q({loading:!1,disabled:!1});case 32:case"end":return e.stop()}}),e,null,[[3,28]])})))).catch((function(e){Y({loading:!1,disabled:!1}),Q({loading:!1,disabled:!1}),K({email:!0,password:!0});var r={};e.inner.forEach((function(e){r[e.path]=e})),N(r)}));case 2:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}();return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(h(),{strategy:"lazyOnload",src:"https://connect.facebook.net/en_US/sdk.js#version=v11.0&appId=".concat(U.facebook.clientId,"&cookie=true&xfbml=true&status=true")}),(0,C.jsxs)(n.Z,{component:"main",maxWidth:"sm",sx:_.outerContainer,children:[(0,C.jsx)(o.Z,{sx:_.midContainer,children:(0,C.jsx)(o.Z,{sx:_.innerContainer,children:(0,C.jsx)("form",{onSubmit:ae,"data-testid":"login-form",children:(0,C.jsxs)(a.ZP,{container:!0,direction:"column",children:[(0,C.jsx)(S.Z,{component:"h1",gutterBottom:!0,variant:"h3",sx:_.memberLoginText,children:u("login.memberLogin")}),F&&(0,C.jsx)(l.Z,{sx:_.alert,severity:"error",children:F}),(0,C.jsx)(i.Z,{autoComplete:"email",error:!!I.email,label:u("emailAddressCapitalized"),placeholder:u("emailAddressCapitalized"),id:"email",name:"email",variant:"outlined",value:k,onChange:function(e){return re(e.target.name,e.target.value,E)},onBlur:function(e){return ee(e.target.name,e.target.value)}}),!!I.email&&(0,C.jsx)(S.Z,{sx:_.error,color:"error",variant:"para2",role:"alert",children:u(I.email.message)}),(0,C.jsx)(i.Z,{autoComplete:"current-password",error:!!I.password,label:u("login.password"),placeholder:u("login.password"),id:"password",name:"password",type:"password",variant:"outlined",value:D,onChange:function(e){return re(e.target.name,e.target.value,L)},onBlur:function(e){return ee(e.target.name,e.target.value)}}),!!I.password&&(0,C.jsx)(S.Z,{sx:_.error,color:"error",variant:"para2",role:"alert",children:u(I.password.message)}),(0,C.jsx)(S.Z,{color:"textSecondary",gutterBottom:!0,variant:"para2",children:(0,C.jsx)(Z.Z,{href:"/account/forgot-password",children:u("login.forgotPassword")})}),(0,C.jsxs)(o.Z,{sx:_.buttonContainer,children:[(0,C.jsx)(j.Z,{type:"submit",fullWidth:!0,loading:V.loading,disabled:V.disabled,children:(0,C.jsx)(S.Z,{variant:"button1",children:u("logIn")})}),(0,C.jsx)(o.Z,{sx:_.orContainer,children:(0,C.jsx)(S.Z,{children:u("or")})}),(0,C.jsx)(O.Z,{onClick:function(){return ne()},isLoading:J.loading,isDisabled:J.disabled,children:(0,C.jsx)(S.Z,{variant:"button1",children:u("continueWithFB")})})]})]})})})}),(0,C.jsx)(S.Z,{color:"textSecondary",variant:"para2",sx:_.signUpText,children:u("login.notAMemberYet",{link:(0,C.jsx)(Z.Z,{href:f,children:u("login.signUpNow")})})})]})]})}D.Layout=k.Z},15825:function(e,r,t){"use strict";t.d(r,{s:function(){return o}});t(87794);var n=t(11752),a=(t(9669),t(34155),(0,n.default)().publicRuntimeConfig);function o(e){return new Promise((function(r,n){a.recaptcha.enabled?t.g.grecaptcha.ready((function(){t.g.grecaptcha.execute(a.recaptcha.siteKeyV3,{action:e}).then(r).catch(n)})):r(null)}))}},26053:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/account/login",function(){return t(75593)}])}},function(e){e.O(0,[8584,939,4231,7229,9774,2888,179],(function(){return r=26053,e(e.s=r);var r}));var r=e.O();_N_E=r}]);
//# sourceMappingURL=login-a7dee09a5421619e.js.map